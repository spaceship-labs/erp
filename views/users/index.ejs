<%
	var alphabets= ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']; 
%>

<div ng-controller='userCTL' >
	<p><button class="btn btn-primary" data-toggle="modal" data-target="#myModal">Nuevo Usuario</button></p>
	<br/>	
	<ul class="alphabets">
		<% var ch;
		for(var i=0;i<alphabets.length;i++){
			ch = alphabets[i];
			if(alphabets_company.indexOf(ch) != -1){ %>
				<li><span ng-click="searchInputSelect='<%=ch%>'"><%= ch %></span></li>
			<% }else {%>
				<li><%= ch%></li>
			<% } %>
		<% } %>
	</ul>
	<div class="peoplelist">
		<div class="row-fluid">
			<div class="span6" ng-repeat='user in users | filter:userFilter'>
				<div class="peoplewrapper">
					<div class="thumb">
						<img ng-src="/uploads/users/{{user.icon}}" alt="" />
					</div>
					<div class="peopleinfo">
						<h4>
							<a href="/users/edit/{{user.id}}">
							{{user.name}}
							</a>
						</h4>
						<ul>
							<li><span>Registro: </span>{{user.createdAtString}}</li>
							<li><span>ultimo Acceso: </span></li>
							<li><span>Email: </span>{{user.email}}</li>
							<li><span>Telefono: </span>{{user.phone}}</li>
							<li><span>Aplicaciones: </span>{{user.apps}}</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="clearfix"></div>
	<div class="span6">
		<div class="alert alert-block unseen userAlert">
			<button data-dismiss="alert" class="close" type="button">×</button>
			<h4>Mensaje</h4>
			<p>El usuario se creo exitosamente</p>
		</div>
	</div>

	<div class="modal fade" id="myModal">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <form 
		      action='/users/create/'
		      method='post'
		      accept-charset='utf-8'
		      enctype='multipart/form-data'
		      ng-submit='sup()'
		      class='stdform stdform2 userCreate'
	      />
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Nuevo Usuario</h4>
		      </div>
		      <div class="modal-body">	        
					<p><label for='name'>Nombre*</label><span class='field'><input type='text' name='name' class='form-control required'  /></span></p>	
					<p><label for='last_name'>Apellidos*</label><span class='field'><input type='text' name='last_name' class='form-control required'  /></span></p>			
					<p><label for='email'>Email*</label><span class='field'><input type='text' name='email' class='form-control required'  /></span></p>		
					<p><label for='password'>Contraseña*</label><span class='field'><input type='password' name='password' class='form-control required password' /></span></p>					
					<p><label for='app_select'>Aplicaciones</label>
					<span class="field">
						<select name='app_select' multiple='multiple' class='chzn-select form-control large' data-placeholder="Agregar Aplicaciones..." style='width:285px'>
							<% for(var i=0;i<apps.length;i++){ %>
								<option value='<%= apps[i].controller %>'><%=apps[i].name%></option>
							<% } %>
						</select>
					</span></p>
					<p>
						<label>Avatar</label>		
						<span class='field'>
							<span class="fileupload fileupload-new" data-provides="fileupload">
								<span class="input-append">
								<span class="uneditable-input span2">
								    <i class="iconfa-file fileupload-exists"></i>
								    <span class="fileupload-preview"></span>
								</span>
								<span class="btn btn-file">
									<span class="fileupload-new">Archivo</span>
									<span class="fileupload-exists">Cambiar</span>
									<input type="file" name='icon_input' />
								</span>
								<a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
							</span>
						    </span>
						</span>
					</p>			
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
		        <input type="submit" class="btn btn-primary" value='Guardar'>
		      </div>
		</form>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	<%- partial('../global/notices') -%> 
</div>
